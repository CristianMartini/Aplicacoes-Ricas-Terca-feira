<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Storage 1</title>
    <style>
        #fconfig {
            position: absolute;
            border-radius: 1px;
            width: 250px;
            padding: 10px;
            background-color: bisque;
            display: none;
        }
    </style>
</head>

<body>

    <div class="forms">
        <p>Exemplo de WebStorage</p>
        <p id="painel"></p>
        <div>
            <div id="nomeDialog">
                <label for="">Informe seu nome:</label>
                <input type="text" name="" id="inputNome">
                <button onclick="carregarPreferencias()">Carregar Preferencias</button>
            </div>
            <button onclick="mostrarOpcoes()">Opções</button>
        </div>
        <form name="fconfig" id="fconfig" action="">
            <div>
                <label for="">Nome </label>
                <input type="text" name="fname" id="fnome" onclick=>
            </div>
            <div>
                <label for="">Cor de fundo </label>
                <div>
                    <input type="radio" name="fcorf" onclick="defineCor(1,'#f00')">Vermelho
                </div>
                <div>
                    <input type="radio" name="fcorf" onclick="defineCor(1,'#DAA520')">Amarelo
                </div>
                <div>
                    <input type="radio" name="fcorf" onclick="defineCor(1,'#00FF7F')">Verde
                </div>
                <div>
                    <input type="radio" name="fcorf" onclick="defineCor(1,'#191970')">Azul
                </div>
            </div>
            <div>
                <label for="">Cor de texto </label>
                <div>
                    <input type="radio" name="fcort" onclick="defineCor(0,'#1C1C1C')">Preto
                </div>
                <div>
                    <input type="radio" name="fcort" onclick="defineCor(0,'#fff')">Branco
                </div>
                <div>
                    <input type="radio" name="fcort" onclick="defineCor(0,'#FFFF00')">Amarelo
                </div>
                <div>
                    <input type="radio" name="fcort" onclick="defineCor(0,'#0000CD')">Azul
                </div>
            </div>
            <button type="button" value="gravar" onclick="gravar()">Gravar</button>
        </form>

    </div>
    <script>

        let vcorfundo, vcortexto, vnome;


        function defineCor(operador, cor) {
            if (operador == 1) {
                document.body.style.backgroundColor = cor;
                vcorfundo = cor;
            } else {
                document.body.style.color = cor;
                vcortexto = cor;
            }
        }
        function gravar() {
            let form = document.getElementById("fconfig");
            vnome = document.getElementById("fnome").value;
            localStorage.setItem(vnome + "_corfundo", vcorfundo);
            localStorage.setItem(vnome + "_cortexto", vcortexto);
            localStorage.setItem(vnome + "_nome", vnome);
            form.style.display = "none"

        }
        function mostrarOpcoes() {
            let form = document.getElementById("fconfig");
            form.style.display = "block";

        }
        function carregarPreferencias() {
            vnome = document.getElementById("inputNome").value;
            if (localStorage.getItem(vnome + "_nome")) {
                vcorfundo = localStorage.getItem(vnome + "_corfundo")
                vcortexto = localStorage.getItem(vnome + "_cortexo");

                defineCor(1, vcorfundo);
                defineCor(2, vcortexto);
                document.getElementById("painel").innerHTML = "Bem vindo " + vnome + "<hr>";
                document.getElementById("nomeDialog").style.display = "none"
            }
            else {
                alert("Perfil nâo encontrado");

            }
        }

    </script>

</body>

</html>